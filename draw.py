import numpy as np
import networkx as nx
import pickle
import math
import matplotlib.pyplot as plt

# results = {
# 'RIMGreedy':[(178.0, 0.1, 213.0, 121.20179796218872), (370.0, 0.2, 427.0, 120.47492575645447), (555.0, 0.3, 642.0, 120.30314707756042), (715.0, 0.4, 856.0, 120.29604196548462), (896.0, 0.5, 1070.0, 121.71890902519226), (1087.0, 0.6, 1284.0, 119.09638786315918), (1259.0, 0.7, 1498.0, 120.2707736492157), (1413.0, 0.8, 1712.0, 121.15435910224915), (1597.0, 0.9, 1926.0, 120.01209592819214)],
# 'RIMComm': [(172.0, 0.1, 215.0, 0.024765968322753906), (342.0, 0.2, 433.0, 0.034320831298828125), (495.0, 0.3, 642.0, 0.04427599906921387), (696.0, 0.4, 861.0, 0.05467796325683594), (886.0, 0.5, 1074.0, 0.06743502616882324), (1057.0, 0.6, 1288.0, 0.08183979988098145), (1233.0, 0.7, 1498.0, 0.09366393089294434), (1410.0, 0.8, 1718.0, 0.10503125190734863), (1587.0, 0.9, 1932.0, 0.11687707901000977)],
# 'celfpp': [(211, 211, 0.1, 211, 7373.105527162552), (425, 425, 0.2, 425, 7913.902556180954), (639, 639, 0.3, 639, 8271.708419084549), (853, 853, 0.4, 853, 8584.615474939346), (1067, 1067, 0.5, 1067, 9006.382775783539), (1281, 1281, 0.6, 1281, 13665.676544904709), (1495, 1495, 0.7, 1495, 9804.433323860168), (1647, 1710, 0.8, 1647, 45512.236322164536), (1891, 1925, 0.9, 1891, 59778.55338597298)],
# 'ivgreedy': [(77, 211, 0.1, 77, 6808.6712210178375), (171, 427, 0.2, 171, 25468.373104810715), (331, 641, 0.3, 331, 47633.739583969116), (557, 855, 0.4, 557, 62360.94058299065), (819, 1069, 0.5, 819, 65055.83154821396), (1083, 1282, 0.6, 1083, 60414.82712101936), (1345, 1496, 0.7, 1345, 53598.57037115097), (1601, 1710, 0.8, 1601, 43266.319256067276), (1871, 1924, 0.9, 1871, 20054.528212070465)]
#
# }
results = {
'BIMGreedy': [(30.0, 0.9, 56.0, 2.63633394241333), (25.0, 0.8, 50.0, 1.7315971851348877), (23.0, 0.7, 44.0, 1.2035069465637207), (24.0, 0.6, 38.0, 0.703303337097168), (20.0, 0.5, 31.0, 0.43555784225463867), (16.0, 0.4, 25.0, 0.23474407196044922), (16.0, 0.3, 19.0, 0.03799104690551758), (9.0, 0.2, 13.0, 0.042366981506347656), (4.0, 0.1, 7.0, 0.014887094497680664)],
'celfpp': [(52, 54, 0.9, 52, 25.887745141983032), (45, 48, 0.8, 45, 16.693191051483154), (31, 42, 0.7, 31, 47.98557424545288), (27, 36, 0.6, 27, 38.72184896469116), (23, 30, 0.5, 23, 29.841891050338745), (16, 23, 0.4, 16, 28.150134086608887), (12, 13, 0.3, 12, 20.182307720184326), (10, 10, 0.2, 10, 26.05609107017517), (3, 5, 0.1, 3, 17.666646003723145)],
'TSIFIM': [(53, 55, 0.9, 53, 0.09274101257324219), (41, 48, 0.8, 41, 0.08610105514526367), (29, 43, 0.7, 29, 0.13283991813659668), (11, 32, 0.6, 11, 0.18631601333618164), (9, 30, 0.5, 9, 0.13923192024230957), (8, 22, 0.4, 8, 0.08724212646484375), (6, 14, 0.3, 6, 0.052616119384765625), (4, 12, 0.2, 4, 0.02567005157470703), (2, 2, 0.1, 2, 0.00785684585571289)],
'CSR': [(45, 54, 0.9, 45, 0.4837157726287842), (39, 48, 0.8, 39, 0.47901082038879395), (29, 43, 0.7, 29, 0.6706128120422363), (17, 35, 0.6, 17, 0.9599111080169678), (11, 28, 0.5, 11, 0.9625041484832764), (6, 18, 0.4, 6, 0.862076997756958), (6, 18, 0.3, 6, 0.57948899269104), (4, 11, 0.2, 4, 0.38378119468688965), (2, 2, 0.1, 2, 0.19155120849609375)]

}


# 特点相关介绍他们怎么做的，相关文献
# 现在是怎么做的，解决了什么问题，还有什么问题没有解决

coverage = [0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9]

seeds_results = {}
# seeds_results['BIMGreedy'] = [round(i[3], 2) for i in results['BIMGreedy']]
# seeds_results['CELF++'] = [round(i[3], 2) for i in results['CELF++']]
# seeds_results['TSIFIM'] = [round(i[3], 2) for i in results['TSIFIM']]
# seeds_results['CSR'] = [round(i[3], 2) for i in results['CSR']]

seeds_results['BIMGreedy'] = [i[0]for i in results['BIMGreedy']][::-1]
# seeds_results['RIMComm'] = [i[0] for i in results['RIMComm']]
seeds_results['celfpp'] = [i[0] for i in results['celfpp']][::-1]
seeds_results['TSIFIM'] = [i[0] for i in results['TSIFIM']][::-1]
seeds_results['CSR'] = [i[0] for i in results['CSR']][::-1]

f, axa = plt.subplots(1, sharex=True)
inx = 0
line = ['solid', 'dotted', 'dashed', 'dashdot', (0, (5, 5)), (0, (3, 5, 1, 5)), (0, (3, 5, 1, 5, 1, 5))]
marker = [',', '1', 'p', 's', 'x', '8', '*', '|']
for alg_name, result in seeds_results.items():
    axa.plot(coverage, result, label=alg_name, marker=marker[inx])
    for a, b in zip(coverage, result):
        plt.text(a, b, b, ha='center', va='bottom', fontsize=12)
    inx += 1
# 透明背景
axa.legend(loc=2, fontsize='x-large')
f.subplots_adjust(right=0.85)

axa.set_xlabel("coverage", fontsize=22)
# axa.set_ylabel("running time(s)", fontsize=22)
axa.set_ylabel("size of seed set", fontsize=22)
axa.set_title("size of seed set", fontsize=28)
# axa.set_title("running time(s)", fontsize=28)
plt.tick_params(labelsize=12)
# plt.savefig('./SimulationResults/sizeOfSeedSet.pdf', dpi=1200, format='pdf')
plt.show()